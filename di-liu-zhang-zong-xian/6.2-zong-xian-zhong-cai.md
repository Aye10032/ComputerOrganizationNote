# 6.2 总线仲裁

用于处理多个设备争抢总线控制权的问题

## 6.2.1 集中仲裁方式

1. 主设备发出请求信号
2. 若多个主设备同时要使用总线，则由<mark style="color:purple;">**总线控制器**</mark>的判优、仲裁逻辑按一定的优先等级顺序确定哪个主设备能使用总线
3. 获得总线使用权的主设备开始传送数据

### 1、 链式查询方式

![链式查询方式](../.gitbook/assets/链式查询方式.png)

总线允许信号按照顺访问各个设备

- 优点
  - 优先级固定：离总线控制器越近的部件，优先级越高
  - 只需要三根控制线，结构简单，扩充容易
- 缺点
  - 对硬件电路的故障敏感
  - 优先级不能改变
  - 会产生“饥饿”现象

### 2、计数器查询方式

![计数器查询方式](../.gitbook/assets/计数器查询方式.png)

1. 总线控制器收到总线请求信号，判断总线空闲，计数器开始计数

2. 总线计数器从初始值开始增加，并通过地址线发送出去

3. 当地址线上的计数值与请求使用总线的设备一致时，停止计数，分配总线

   

- 优点
  - 通过改变计数器初始值可以<mark style="color:orange;">**改变优先级**</mark>
  - 对电路的故障没有链式的敏感
- 缺点
  - 控制线数量增加
    - 地址线数量：若有n个设备，则需要$$\log_{2}n$$条地址线
  - 控制相对比链式查询相对复杂
