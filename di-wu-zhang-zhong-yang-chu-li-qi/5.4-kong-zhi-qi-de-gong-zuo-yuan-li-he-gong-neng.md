# 5.4 控制器的工作原理和功能

## 5.4.1 硬布线控制器

### 1、硬布线控制器单元图

根据<mark style="color:blue;">**指令操作码**</mark>、<mark style="color:purple;">**当前的机器周期**</mark>、<mark style="color:orange;">**节拍信号**</mark>、<mark style="color:green;">**机器状态条件**</mark>即可确定当前节拍下应发出什么<mark style="color:red;">**微命令**</mark>。

![硬布线控制器](../.gitbook/assets/硬布线控制器.png)

- 通过判断取值周期、节拍数和具体指令操作码，写出逻辑表达式
- 将逻辑表达式以电路实现

### 2、硬布线控制器的设计

1. 分析每个阶段的微操作序列
   - 会用到哪些指令
   - 在什么阶段用到
   - 在什么条件下用到
2. 选择CPU控制方式
   - 定长周期 & 不定长周期
   - 每个机器周期几个节拍
3. 安排微操作时序
   - 哪些微操作在前，那些在后
   - 每个节拍内安排多少指令
4. 电路设计
   1. 列出操作时间表
   2. 写出微操作命令的最简表达式
   3. 画出逻辑图

### 3、安排微操作时序的原则

- 微操作的<mark style="color:orange;">**先后顺序**</mark>不得随意更改
  - 先分析指令的依赖顺序
- 被控对象<mark style="color:orange;">**不同**</mark>的微操作尽量安排在<mark style="color:orange;">**一个节拍内**</mark>完成
- <mark style="color:orange;">**占用时间较短**</mark>的微操作尽量安排在一个节拍内完成，并允许有先后顺序
  - 同样在CPU内部的寄存器之间的数据流可以安排在一个周期内
  - 主存和内部寄存器之间的数据操作不能在一个节拍内

### 4、硬布线控制器的特点

- 一般用于RISC （精简指令集系统）
- 扩充指令较困难
- 执行速度很快，微操作控制信号由组合逻辑电路即时产生

## 5.4.2 微程序控制器

